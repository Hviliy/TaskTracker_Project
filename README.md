# Task Tracker

> –°–µ—Ä–≤–∏—Å-—Ç—Ä–µ–∫–µ—Ä –∑–∞–¥–∞—á –Ω–∞ FastAPI + PostgreSQL —Å —Ä–æ–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ –∞–≤—Ç–æ—Ç–µ—Å—Ç–∞–º–∏. –ü—Ä–æ–µ–∫—Ç –ø–æ "–°–ø–µ—Ü–≥–ª–∞–≤—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö". –í—ã–ø–æ–ª–Ω–∏–ª –î–∞–Ω–∏–ª–∞ –ö–æ–ø—ã–ª–æ–≤

## üß∞ –°—Ç–µ–∫
- Python 3.12
- FastAPI + Uvicorn
- PostgreSQL
- SQLAlchemy
- Alembic (–º–∏–≥—Ä–∞—Ü–∏–∏)
- pandas + matplotlib (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏)
- pytest + pytest-cov (—Ç–µ—Å—Ç—ã –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ)
- Docker

## ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- CRUD –∑–∞–¥–∞—á
- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á + —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è + —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏ (new / in_progress / review / done) + –∏—Å—Ç–æ—Ä–∏—è
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∑–∞–¥–∞—á–∞–º: —Å—Ç–∞—Ç—É—Å—ã / —Ç–µ–º—ã / –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ / lead time (JSON + PNG)
- –†–æ–ª–∏: user (—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏) / admin (–≤—Å–µ –∑–∞–¥–∞—á–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–∞–º–∏/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏)
- UI-—Å—Ç—Ä–∞–Ω–∏—Ü—ã: /ui/login, /ui/register, /ui/tasks, /ui/admin, /ui/analytics

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- alembic/ ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏
- app/ ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    - api/ ‚Äî —Ä–æ—É—Ç—ã API
    - db/ ‚Äî –º–æ–¥–µ–ª–∏ –∏ –±–∞–∑–∞
    - schemas/ ‚Äî Pydantic-—Å—Ö–µ–º—ã
    - core/ ‚Äî –∫–æ–Ω—Ñ–∏–≥–∏/–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    - ui/ ‚Äî –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ Jinja2
- tests/ ‚Äî –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã
- .env ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
–°–æ–∑–¥–∞–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

Windows (PowerShell)
```
py -m venv .venv
.\.venv\Scripts\Activate.ps1
pip install -r requirements.txt
```
Linux/Mac
```
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```
## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```
DATABASE_URL=postgresql+psycopg2://postgres:123@localhost:5432/task_tracker
TEST_DATABASE_URL=postgresql+psycopg2://postgres:123@localhost:5432/task_tracker_test
SECRET_KEY=—Å—é–¥–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á

# –¥–ª—è —Å–º–µ–Ω—ã —Ä–æ–ª–µ–π —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –∞–¥–º–∏–Ω–∞ (—Ç–µ—Å—Ç–æ–≤—ã–π)
ALLOW_ROLE_SELF_ASSIGN=true 
```

## üêò –ó–∞–ø—É—Å–∫ PostgreSQL
1. —á–µ—Ä–µ–∑ Docker
```
docker-compose up -d
```
2. –ª–æ–∫–∞–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π PostgreSQL
–°–æ–∑–¥–∞–π –ë–î task_tracker –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–ø–∞—Ä–æ–ª—å –∫–∞–∫ –≤ .env.

## üß± –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
–ü—Ä–∏–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏:
```
alembic upgrade head
```
–ú–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏:
- users ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
  - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π email
  - role (enum: user / admin)
  - password_hash, is_active, created_at
- topics ‚Äî —Ç–µ–º—ã –∑–∞–¥–∞—á
  - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π name
  - description
- task_statuses ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç–∞—Ç—É—Å–æ–≤
  - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π code (new, in_progress, review, done)
  - name, sort_order, is_terminal
- tasks ‚Äî –∑–∞–¥–∞—á–∏
  - title, description, priority, due_date, created_at, updated_at
  - —Å–≤—è–∑–∏:
    - status_id -> task_statuses.id
    - topic_id -> topics.id
    - creator_id -> users.id
    - assignee_id -> users.id
- task_status_history ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω—ã —Å—Ç–∞—Ç—É—Å–æ–≤
  - task_id -> tasks.id
  - from_status_id -> task_statuses.id
  - to_status_id -> task_statuses.id
  - changed_by_id -> users.id
  - changed_at

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
uvicorn app.main:app --reload
```
Swagger: http://127.0.0.1:8000/docs
UI:
- http://127.0.0.1:8000/ui/login - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
- http://127.0.0.1:8000/ui/register - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- http://127.0.0.1:8000/ui/tasks - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞—á
- http://127.0.0.1:8000/ui/admin - –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- http://127.0.0.1:8000/ui/analytics - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π

## üë§ –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞
- user: –≤–∏–¥–∏—Ç/—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç/—É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏
- admin: –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∑–∞–¥–∞—á–∞–º + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–∞–º–∏/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
–ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∞–¥–º–∏–Ω–∞:
- –ß–µ—Ä–µ–∑ API: –≤ swagger –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–≤—à–∏—Å—å, –∑–∞–ª–æ–≥–∏–Ω–∏–≤—à–∏—Å—å —á–µ—Ä–µ–∑ authorize (–≤ –≤–µ—Ä—Ö–Ω–µ–º –ø—Ä–∞–≤–æ–º —É–≥–ª—É) –∏ –∏—Å–ø–æ–ª—å–∑—É—è PATCH /users/{user_id}/role
- –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ –ë–î, –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª–µ role —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ admin

## üß™ –¢–µ—Å—Ç—ã
–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```
pytest -q
```
–ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
```
pytest --cov=app --cov-report=term-missing
```
–¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç —Ç–µ—Å—Ç–æ–≤—É—é –ë–î

